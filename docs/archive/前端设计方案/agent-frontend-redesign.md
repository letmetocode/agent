# Agent 应用前端重构设计方案

## 一、现状问题分析

### 1.1 视觉层面问题

| 问题 | 具体表现 |
|------|----------|
| 信息密度过高 | 三栏布局挤满屏幕，无呼吸感 |
| 色彩层次混乱 | Ant Design 默认主题与自定义背景冲突 |
| 字体层级不清 | 标题、正文、辅助信息区分度不足 |
| 圆角/阴影不统一 | 部分卡片有圆角，部分直角 |
| 缺乏视觉焦点 | 用户进入页面后视线无处落脚 |

### 1.2 功能分区问题

| 问题 | 具体表现 |
|------|----------|
| 导航结构扁平 | 仅3个页面，Agent/任务/知识库等概念混杂 |
| 信息层级混乱 | Plan/Task/Execution 三层信息平铺展示 |
| 操作路径冗长 | Workflow Draft 编辑嵌套过深 |
| 状态反馈不足 | 加载、错误、空状态处理粗糙 |

### 1.3 交互体验问题

| 问题 | 具体表现 |
|------|----------|
| 缺乏渐进披露 | 所有信息一次性展示，无主次 |
| 实时反馈弱 | SSE 事件以时间线形式展示，可读性差 |
| 操作打断感强 | Drawer 弹窗频繁打断工作流 |
| 无快捷键支持 | 纯鼠标操作，效率低 |

---

## 二、信息架构（Information Architecture）

### 2.1 页面结构

```
┌─────────────────────────────────────────────────────────────┐
│  顶部导航栏 (Global Nav)                                      │
│  Logo │ 工作台 │ Agent │ 任务 │ 知识库 │ 监控 │ 设置 │ 用户  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                    页面内容区域                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 页面清单

| 页面 | 路径 | 功能描述 | 优先级 |
|------|------|----------|--------|
| **工作台** | `/` | 会话入口、快捷操作、最近活动 | P0 |
| **对话页** | `/sessions/:id` | 核心交互页面，对话+执行可视化 | P0 |
| **Agent 管理** | `/agents` | Agent 配置、能力编排、版本管理 | P0 |
| **Agent 详情** | `/agents/:id` | 单个 Agent 的配置与调试 | P0 |
| **任务列表** | `/tasks` | 历史任务查询、筛选、批量操作 | P1 |
| **任务详情** | `/tasks/:id` | 单任务完整执行链路追踪 | P1 |
| **知识库** | `/knowledge` | 文档管理、向量化状态、检索测试 | P1 |
| **知识库详情** | `/knowledge/:id` | 单知识库文档列表与配置 | P1 |
| **监控大盘** | `/monitoring` | 实时指标、异常告警、系统健康 | P2 |
| **执行日志** | `/logs` | 结构化日志查询与分析 | P2 |
| **设置** | `/settings` | 用户配置、API 密钥、系统设置 | P2 |

### 2.3 导航结构

```
主导航（左侧 Sidebar）
├── 工作台 (Home)
│   └── 快捷创建会话
│   └── 最近会话列表
│   └── 待处理任务
│
├── Agent 工厂
│   ├── Agent 列表
│   ├── 新建 Agent
│   └── Workflow 治理
│
├── 任务中心
│   ├── 运行中
│   ├── 已完成
│   └── 失败/重试
│
├── 知识库
│   ├── 知识库列表
│   └── 文档上传
│
├── 运维监控
│   ├── 实时大盘
│   ├── 执行日志
│   └── 告警规则
│
└── 设置
    ├── 个人设置
    ├── 系统配置
    └── API 密钥
```

---

## 三、关键页面布局设计

### 3.1 工作台（Home）

**设计目标**：作为用户着陆页，提供清晰的入口和上下文

```
┌─────────────────────────────────────────────────────────────────────┐
│  Sidebar  │  主内容区                                                │
│  (200px)  │  (flex: 1)                                               │
├───────────┼──────────────────────────────────────────────────────────┤
│           │  ┌────────────────────────────────────────────────────┐ │
│  Logo     │  │  欢迎区域 + 快捷创建                                  │ │
│           │  │  [输入框: 描述你的任务...] [创建会话 ▼]              │ │
│           │  └────────────────────────────────────────────────────┘ │
│           │                                                           │
│  主导航    │  ┌─────────────────────┐  ┌───────────────────────────┐ │
│  ─────    │  │  最近会话 (6个卡片)  │  │  运行中任务 (实时列表)     │ │
│  工作台    │  │  ┌───┐┌───┐┌───┐   │  │  ● 任务 #123 运行中 12s   │ │
│  Agent    │  │  │   ││   ││   │   │  │  ○ 任务 #124 排队中      │ │
│  任务     │  │  └───┘└───┘└───┘   │  │  ✓ 任务 #125 完成 2m     │ │
│  知识库   │  │  ...               │  │                           │ │
│  监控     │  └─────────────────────┘  └───────────────────────────┘ │
│  设置     │                                                           │
│           │  ┌────────────────────────────────────────────────────┐ │
│           │  │  系统状态卡片 (Agent数/任务成功率/平均耗时)          │ │
│           │  └────────────────────────────────────────────────────┘ │
│           │                                                           │
└───────────┴───────────────────────────────────────────────────────────┘
```

**设计说明**：
- 左侧固定 200px Sidebar，提供全局导航
- 顶部欢迎区域突出「快捷创建」核心 CTA
- 三栏网格布局展示不同维度的信息
- 卡片使用 subtle hover 效果，增强可点击感知

---

### 3.2 对话页（Conversation）

**设计目标**：核心工作页面，平衡对话体验与执行可视化

```
┌──────────────────────────────────────────────────────────────────────────────┐
│  Sidebar  │  左侧面板 (280px)      │  主对话区 (flex)      │  右侧面板 (320px) │
├───────────┼────────────────────────┼───────────────────────┼─────────────────┤
│           │  ┌──────────────────┐  │  ┌─────────────────┐  │  ┌────────────┐ │
│  Logo     │  │  Session #123    │  │  │  对话标题栏      │  │  │ Plan #456  │ │
│           │  │  会话标题         │  │  │  [返回] [分享]   │  │  │ 状态: 运行中 │ │
│           │  │                  │  │  │                  │  │  │            │ │
│  主导航    │  │  ─────────────── │  │  │  消息气泡区域    │  │  │ 进度条 60% │ │
│  ─────    │  │  回合历史         │  │  │  ┌──────────┐   │  │  │            │ │
│  工作台    │  │  ● Turn #3 (当前)│  │  │  │ User     │   │  │  │ 任务统计    │ │
│  Agent    │  │  ○ Turn #2       │  │  │  │ 消息内容  │   │  │  │ ████░░░░░ │ │
│  任务     │  │  ○ Turn #1       │  │  │  └──────────┘   │  │  │ 12/20 完成 │ │
│  ...      │  │                  │  │  │  ┌──────────┐   │  │  │            │ │
│           │  │  ─────────────── │  │  │  │ Agent    │   │  │  │ 任务列表    │ │
│           │  │  Plan 历史        │  │  │  │ 回复内容  │   │  │  │ ▶ Task 1   │ │
│           │  │  #456 运行中      │  │  │  │ [引用]   │   │  │  │   ✓ Task 2 │ │
│           │  │  #455 已完成      │  │  │  └──────────┘   │  │  │   ● Task 3 │ │
│           │  │  #454 失败        │  │  │                  │  │  │            │ │
│           │  └──────────────────┘  │  │  ─────────────── │  │  │ 执行日志    │ │
│           │                        │  │  输入框区域       │  │  │ [实时滚动]  │ │
│           │                        │  │  ┌─────────────┐ │  │  │ Task 3 开始 │ │
│           │                        │  │  │ [输入...  ] │ │  │  │ Task 2 完成 │ │
│           │                        │  │  │ [发送] [▶]  │ │  │  │ ...        │ │
│           │                        │  │  └─────────────┘ │  │  └────────────┘ │
└───────────┴────────────────────────┴───────────────────────┴─────────────────┘
```

**设计说明**：
- **三栏可变布局**：左侧面板可折叠（280px → 0），右侧面板可切换显示内容
- **消息区域**：采用气泡对话形式，Agent 回复支持「引用来源」展开
- **右侧面板**：支持 Plan/任务/日志三种视图切换，避免信息过载
- **输入区域**：固定在底部，支持多行输入和快捷操作

---

### 3.3 Agent 管理页

**设计目标**：清晰的 Agent 列表与配置入口

```
┌─────────────────────────────────────────────────────────────────────────┐
│  Sidebar  │  主内容区                                                    │
├───────────┼─────────────────────────────────────────────────────────────┤
│           │  ┌────────────────────────────────────────────────────────┐ │
│           │  │  Agent 工厂                              [+ 新建 Agent] │ │
│           │  └────────────────────────────────────────────────────────┘ │
│           │                                                             │
│           │  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐           │
│           │  │ 🔍 搜索     │ │ ▼ 筛选      │ │ ▼ 排序      │           │
│           │  └─────────────┘ └─────────────┘ └─────────────┘           │
│           │                                                             │
│           │  ┌────────────────────────────────────────────────────────┐ │
│           │  │  Agent 卡片网格                                          │ │
│           │  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐     │ │
│           │  │  │ 🤖 代码助手  │  │ 📊 数据分析师│  │ 📝 文档生成器│     │ │
│           │  │  │             │  │             │  │             │     │ │
│           │  │  │ 版本: v3    │  │ 版本: v1    │  │ 版本: v2    │     │ │
│           │  │  │ 调用: 1.2k  │  │ 调用: 345   │  │ 调用: 89    │     │ │
│           │  │  │             │  │             │  │             │     │ │
│           │  │  │ [配置] [运行]│  │ [配置] [运行]│  │ [配置] [运行]│     │ │
│           │  │  └─────────────┘  └─────────────┘  └─────────────┘     │ │
│           │  └────────────────────────────────────────────────────────┘ │
│           │                                                             │
└───────────┴─────────────────────────────────────────────────────────────┘
```

---

### 3.4 Workflow 治理页

**设计目标**：Workflow Draft 的可视化管理与版本发布

```
┌─────────────────────────────────────────────────────────────────────────┐
│  Sidebar  │  主内容区                                                    │
├───────────┼─────────────────────────────────────────────────────────────┤
│           │  ┌────────────────────────────────────────────────────────┐ │
│           │  │  Workflow 治理                          [+ 新建 Workflow]│ │
│           │  └────────────────────────────────────────────────────────┘ │
│           │                                                             │
│           │  ┌──────────┬───────────────────────────────────────────┐  │
│           │  │ 筛选栏   │  列表视图                                  │  │
│           │  │ ──────── │  ┌─────────────────────────────────────┐ │  │
│           │  │ □ DRAFT  │  │ Draft Key    状态    操作            │ │  │
│           │  │ □ ACTIVE │  │ ─────────────────────────────────── │ │  │
│           │  │ □ ...    │  │ workflow-001 ACTIVE  [查看] [发布]   │ │  │
│           │  │          │  │ workflow-002 DRAFT   [编辑] [删除]   │ │  │
│           │  │          │  │ ...                                 │ │  │
│           │  │          │  └─────────────────────────────────────┘ │  │
│           │  └──────────┴───────────────────────────────────────────┘  │
│           │                                                             │
│           │  点击列表项 → 右侧滑出详情面板                              │
│           │  ┌────────────────────────────────────────────────────────┐ │
│           │  │  Workflow Draft 详情                      [×]          │ │
│           │  │  ───────────────────────────────────────────────────── │ │
│           │  │  基本信息                                                │ │
│           │  │  Draft Key: workflow-001                                 │ │
│           │  │  状态: DRAFT                                             │ │
│           │  │                                                          │ │
│           │  │  Graph Definition (JSON)                                 │ │
│           │  │  ┌────────────────────────────────────────────────────┐ │ │
│           │  │  │ {                                                  │ │ │
│           │  │  │   "nodes": [...],                                  │ │ │
│           │  │  │   "edges": [...]                                   │ │ │
│           │  │  │ }                                                  │ │ │
│           │  │  └────────────────────────────────────────────────────┘ │ │
│           │  │                                                          │ │
│           │  │  [保存草稿]  [发布为正式版本]                             │ │
│           │  └────────────────────────────────────────────────────────┘ │
│           │                                                             │
└───────────┴─────────────────────────────────────────────────────────────┘
```

---

### 3.5 任务详情页

**设计目标**：完整的任务执行链路可视化

```
┌─────────────────────────────────────────────────────────────────────────┐
│  Sidebar  │  主内容区                                                    │
├───────────┼─────────────────────────────────────────────────────────────┤
│           │  ┌────────────────────────────────────────────────────────┐ │
│           │  │  任务 #12345                              [返回任务列表] │ │
│           │  │  ───────────────────────────────────────────────────── │ │
│           │  │  状态: ✅ 已完成  │  耗时: 45s  │  Agent: 代码助手        │ │
│           │  └────────────────────────────────────────────────────────┘ │
│           │                                                             │
│           │  ┌────────────────────────────────────────────────────────┐ │
│           │  │  执行流程可视化 (DAG 图)                                  │ │
│           │  │                                                          │ │
│           │  │     [开始] → [分析] → [执行] → [验证] → [完成]          │ │
│           │  │       ✓        ✓        ✓        ✓        ✓              │ │
│           │  │                                                          │ │
│           │  └────────────────────────────────────────────────────────┘ │
│           │                                                             │
│           │  ┌────────────────────────────────────────────────────────┐ │
│           │  │  执行步骤详情                                            │ │
│           │  │  ───────────────────────────────────────────────────── │ │
│           │  │  步骤 1: 分析需求                                        │ │
│           │  │  状态: ✓  耗时: 12s  模型: gpt-4o                        │ │
│           │  │  ───────────────────────────────────────────────────── │ │
│           │  │  输入: 请分析以下需求...                                  │ │
│           │  │  输出: 经过分析，这是一个...                              │ │
│           │  │  ───────────────────────────────────────────────────── │ │
│           │  │  [查看完整日志] [复制输出]                                │ │
│           │  └────────────────────────────────────────────────────────┘ │
│           │                                                             │
└───────────┴─────────────────────────────────────────────────────────────┘
```

---

## 四、核心用户路径

### 4.1 路径一：新建 Agent → 运行任务

```
┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐
│  工作台  │ → │ 创建会话 │ → │ 输入目标 │ → │ 执行中  │ → │ 查看结果 │
└─────────┘    └─────────┘    └─────────┘    └─────────┘    └─────────┘
     │              │              │              │              │
     │              │              │              │              │
     ▼              ▼              ▼              ▼              ▼
  点击 [+]      选择 Agent    输入自然语言   实时查看进度   查看引用来源
  或快捷键 C    或默认 Agent   按 Enter 发送   可暂停/取消    导出/分享
```

**关键交互点**：
1. **快捷创建**：工作台输入框支持 `/` 唤起 Agent 选择
2. **实时反馈**：SSE 流式输出，任务进度可视化
3. **中途控制**：支持暂停、取消、重试操作
4. **结果展示**：结构化输出 + 引用来源追溯

---

### 4.2 路径二：调试 Workflow

```
┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐
│ Workflow │ → │ 选择    │ → │ 编辑    │ → │ 测试    │ → │ 发布    │
│ 治理页   │    │ Draft   │    │ Graph   │    │ 运行    │    │ 版本    │
└─────────┘    └─────────┘    └─────────┘    └─────────┘    └─────────┘
     │              │              │              │              │
     │              │              │              │              │
     ▼              ▼              ▼              ▼              ▼
  查看列表      点击列表项     JSON 编辑器    输入测试数据   确认发布
  筛选状态      右侧滑出详情    实时校验       查看执行结果   生成新版本
```

---

### 4.3 路径三：问题排查

```
┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐
│ 发现异常 │ → │ 查看日志 │ → │ 定位问题 │ → │ 重试/修复│
└─────────┘    └─────────┘    └─────────┘    └─────────┘
     │              │              │              │
     │              │              │              │
     ▼              ▼              ▼              ▼
  任务失败提示   点击任务进入    查看错误堆栈   一键重试
  或监控告警    详情页         和输入输出     或编辑后重试
```

---

## 五、组件与状态设计

### 5.1 状态体系

```typescript
// 全局状态（Zustand）
interface AppState {
  // 用户状态
  user: User | null;
  
  // 导航状态
  sidebarCollapsed: boolean;
  currentRoute: string;
  
  // 全局通知
  notifications: Notification[];
}

// 会话状态
interface SessionState {
  currentSession: Session | null;
  messages: Message[];
  turns: Turn[];
  plans: Plan[];
  selectedPlanId: number | null;
  
  // 加载状态
  loading: boolean;
  sending: boolean;
  
  // SSE 连接
  sseConnected: boolean;
  processEvents: ProcessEvent[];
}

// 任务状态
interface TaskState {
  tasks: Task[];
  selectedTask: Task | null;
  executions: TaskExecution[];
  
  // 筛选状态
  statusFilter: TaskStatus | null;
  sortBy: 'time' | 'status' | 'duration';
}
```

### 5.2 空状态设计

| 场景 | 设计 |
|------|------|
| 无会话 | 插图 + "开始你的第一次对话" + [创建会话] 按钮 |
| 无消息 | 引导输入框高亮，提示 "输入你的问题..." |
| 无任务 | 空状态插图 + "暂无运行中的任务" |
| 无搜索结果 | "未找到匹配结果" + 建议操作 |
| 无权限 | 锁图标 + "你没有权限访问此页面" |

### 5.3 加载态设计

| 场景 | 设计 |
|------|------|
| 页面加载 | Skeleton 骨架屏，按内容区块分布 |
| 消息发送 | 输入框禁用 + 发送按钮转圈 |
| 任务执行 | 进度条 + 步骤指示器 |
| 数据获取 | 局部 Loading，不阻塞整体交互 |
| 长任务 | 可折叠进度面板，支持后台运行 |

### 5.4 错误态设计

| 场景 | 设计 |
|------|------|
| 网络错误 | 顶部 Banner + 重试按钮 |
| API 错误 | 消息提示 + 错误码 |
| 超时错误 | 提示 + 延长超时选项 |
| 权限错误 | 引导登录或申请权限 |
| 未知错误 | 错误详情可展开，支持反馈 |

### 5.5 流式输出组件

```
┌─────────────────────────────────────────────────────────┐
│ Agent 正在思考...                                        │
│ ▓▓▓▓▓▓▓░░░ 70%                                          │
│                                                          │
│ 当前步骤: 分析需求                                       │
│ ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ │
│ 已完成: 理解问题                                         │
│ 进行中: 分析需求 ◀──                                     │
│ 待执行: 生成方案 → 验证方案 → 输出结果                   │
│                                                          │
│ [暂停] [取消]                                           │
└─────────────────────────────────────────────────────────┘
```

---

## 六、视觉规范

### 6.1 色彩系统

```css
/* 主色 */
--primary-50: #f0fdfa;
--primary-100: #ccfbf1;
--primary-200: #99f6e4;
--primary-300: #5eead4;
--primary-400: #2dd4bf;
--primary-500: #14b8a6;  /* 主色 */
--primary-600: #0d9488;
--primary-700: #0f766e;  /* 深色 */
--primary-800: #115e59;
--primary-900: #134e4a;

/* 中性色 */
--gray-0: #ffffff;
--gray-50: #f8fafc;
--gray-100: #f1f5f9;
--gray-200: #e2e8f0;
--gray-300: #cbd5e1;
--gray-400: #94a3b8;
--gray-500: #64748b;
--gray-600: #475569;
--gray-700: #334155;
--gray-800: #1e293b;
--gray-900: #0f172a;

/* 功能色 */
--success: #22c55e;
--warning: #f59e0b;
--error: #ef4444;
--info: #3b82f6;

/* 背景 */
--bg-primary: #fafafa;
--bg-secondary: #f4f4f5;
--bg-tertiary: #ffffff;
--bg-elevated: #ffffff;

/* 文字 */
--text-primary: #18181b;
--text-secondary: #71717a;
--text-tertiary: #a1a1aa;
--text-inverse: #ffffff;
```

### 6.2 字体规范

```css
/* 字体栈 */
font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans SC', sans-serif;

/* 字号阶梯 */
--text-xs: 12px;      /* 辅助文字、标签 */
--text-sm: 14px;      /* 正文次要 */
--text-base: 16px;    /* 正文 */
--text-lg: 18px;      /* 小标题 */
--text-xl: 20px;      /* 标题 */
--text-2xl: 24px;     /* 大标题 */
--text-3xl: 30px;     /* 页面标题 */

/* 字重 */
--font-normal: 400;
--font-medium: 500;
--font-semibold: 600;
--font-bold: 700;

/* 行高 */
--leading-tight: 1.25;
--leading-normal: 1.5;
--leading-relaxed: 1.75;
```

### 6.3 间距体系

```css
/* 基础单位 4px */
--space-0: 0;
--space-1: 4px;
--space-2: 8px;
--space-3: 12px;
--space-4: 16px;
--space-5: 20px;
--space-6: 24px;
--space-8: 32px;
--space-10: 40px;
--space-12: 48px;
--space-16: 64px;

/* 页面边距 */
--page-padding: 24px;
--section-gap: 32px;
--card-gap: 16px;
```

### 6.4 圆角与阴影

```css
/* 圆角 */
--radius-none: 0;
--radius-sm: 4px;
--radius-md: 8px;
--radius-lg: 12px;
--radius-xl: 16px;
--radius-full: 9999px;

/* 阴影 */
--shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
--shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
--shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
--shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);

/* 卡片阴影 */
--card-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
--card-shadow-hover: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
```

### 6.5 按钮层级

| 类型 | 用途 | 样式 |
|------|------|------|
| Primary | 主要操作 | 实心主色背景，白色文字 |
| Secondary | 次要操作 | 白色背景，主色边框 |
| Tertiary | 三级操作 | 无边框，主色文字 |
| Ghost | 低强调 | 透明背景，hover 时显示背景 |
| Danger | 危险操作 | 红色背景/边框 |

---

## 七、可实现建议

### 7.1 技术栈推荐

| 类别 | 推荐方案 | 理由 |
|------|----------|------|
| 框架 | React 18 + TypeScript | 类型安全，生态成熟 |
| 构建 | Vite | 快速冷启动，HMR |
| 状态管理 | Zustand | 轻量，TypeScript 友好 |
| UI 组件 | Radix UI + Tailwind | 无样式组件，完全可控 |
| 样式 | Tailwind CSS | 原子化，开发效率高 |
| 图标 | Lucide React | 现代，一致性好 |
| 动画 | Framer Motion | React 原生，流畅 |
| 图表 | D3 / React Flow | DAG 可视化 |
| 代码编辑 | Monaco Editor | VS Code 同款 |

### 7.2 组件库选择

**推荐：Headless UI + Tailwind**

```bash
# 核心依赖
npm install @radix-ui/react-dialog @radix-ui/react-dropdown-menu
npm install @radix-ui/react-tabs @radix-ui/react-tooltip
npm install @radix-ui/react-scroll-area @radix-ui/react-separator
npm install @radix-ui/react-avatar @radix-ui/react-badge
npm install @radix-ui/react-progress @radix-ui/react-skeleton

# 动画
npm install framer-motion

# 图标
npm install lucide-react

# 工具
npm install clsx tailwind-merge
```

### 7.3 响应式策略

```css
/* 断点 */
--breakpoint-sm: 640px;   /* 手机横屏 */
--breakpoint-md: 768px;   /* 平板 */
--breakpoint-lg: 1024px;  /* 小桌面 */
--breakpoint-xl: 1280px;  /* 大桌面 */
--breakpoint-2xl: 1536px; /* 超大屏 */

/* 布局适配 */
/* < 768px: 单栏，Sidebar 变为抽屉 */
/* 768px - 1024px: 双栏，隐藏右侧面板 */
/* > 1024px: 三栏完整布局 */
```

### 7.4 性能优化

1. **代码分割**：按路由懒加载
2. **虚拟滚动**：长列表使用 react-window
3. **防抖节流**：搜索输入 300ms 防抖
4. **图片优化**：使用 WebP，懒加载
5. **状态持久化**：Zustand persist 中间件

### 7.5 文件结构

```
frontend/
├── src/
│   ├── app/                    # 应用入口
│   │   ├── App.tsx
│   │   ├── router.tsx
│   │   └── providers.tsx
│   │
│   ├── components/             # 共享组件
│   │   ├── ui/                 # 基础 UI 组件
│   │   │   ├── button.tsx
│   │   │   ├── card.tsx
│   │   │   ├── input.tsx
│   │   │   └── ...
│   │   ├── layout/             # 布局组件
│   │   │   ├── sidebar.tsx
│   │   │   ├── header.tsx
│   │   │   └── page-layout.tsx
│   │   └── features/           # 功能组件
│   │       ├── chat/
│   │       ├── task/
│   │       └── workflow/
│   │
│   ├── hooks/                  # 自定义 Hooks
│   │   ├── use-session.ts
│   │   ├── use-sse.ts
│   │   └── use-task.ts
│   │
│   ├── lib/                    # 工具库
│   │   ├── api.ts
│   │   ├── utils.ts
│   │   └── constants.ts
│   │
│   ├── pages/                  # 页面组件
│   │   ├── home/
│   │   ├── session/
│   │   ├── agent/
│   │   ├── task/
│   │   ├── workflow/
│   │   └── settings/
│   │
│   ├── stores/                 # 状态管理
│   │   ├── app-store.ts
│   │   ├── session-store.ts
│   │   └── task-store.ts
│   │
│   ├── styles/                 # 样式
│   │   ├── globals.css
│   │   └── tailwind.config.js
│   │
│   └── types/                  # 类型定义
│       └── index.ts
│
├── public/                     # 静态资源
├── index.html
├── package.json
├── tsconfig.json
└── vite.config.ts
```

---

## 八、实施路线图

### Phase 1: 基础框架（1-2 周）
- [ ] 搭建新项目结构
- [ ] 配置 Tailwind + Radix UI
- [ ] 实现基础组件库
- [ ] 实现布局框架（Sidebar + Header）

### Phase 2: 核心页面（2-3 周）
- [ ] 工作台页面
- [ ] 对话页重构
- [ ] Agent 管理页
- [ ] 状态管理迁移

### Phase 3: 功能完善（2 周）
- [ ] Workflow 治理页
- [ ] 任务中心
- [ ] 知识库
- [ ] 监控大盘

### Phase 4: 优化打磨（1 周）
- [ ] 动画效果
- [ ] 响应式适配
- [ ] 性能优化
- [ ] 无障碍支持

---

## 九、设计原则总结

1. **极简主义**：每个元素都有其存在的理由
2. **渐进披露**：按优先级展示信息，避免过载
3. **一致性**：颜色、间距、交互模式全站统一
4. **反馈及时**：用户操作后立即给予反馈
5. **效率优先**：支持快捷键，减少操作步骤
6. **可访问性**：考虑色盲、键盘导航等场景

---

*文档版本: v1.0*
*更新日期: 2026-02-11*
