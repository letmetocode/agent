# Frontend 控制台 IA 与 UI/UX 规范（2026-02）

## 1. 文档目标

本规范用于统一前端页面的“信息结构 + 交互逻辑 + 视觉基线 + 工程落地方式”，确保控制台围绕 Agent 主路径高效可用。

设计原则：

- 极简：减少视觉噪音，保留必要信息。
- 现代：强调布局秩序、组件一致性、状态清晰。
- 克制：低频功能后置，避免主路径干扰。
- 高可读：优先信息层级与扫描效率。

## 2. 信息架构（IA）

### 2.1 一级导航（工作域）

1. 工作台（`/workspace`）
2. 对话与执行（`/sessions`、`/sessions/:sessionId`）
3. 任务中心（`/tasks`、`/tasks/:taskId`）
4. 资产中心（`/assets/tools`、`/assets/knowledge`、`/assets/knowledge/:kbId`）
5. 观测与日志（`/observability/overview`、`/observability/logs`）
6. 设置（`/settings/profile`）

补充治理入口：

- Workflow Draft（`/workflows/drafts`）
- 分享结果页（`/share/tasks/:taskId`）

### 2.2 导航层级规则

- 一级导航承载“工作域”，不承载实体细节。
- 二级页面承载“实体详情”（Session/Task/Knowledge）。
- 面包屑只做定位，不承载主操作。
- 主操作统一在页面头部 `PageHeader` 主按钮呈现。

## 3. 关键页面布局（文字线框）

### 3.1 工作台 `/workspace`

布局（12 栅格）：

- 顶部（12）：标题 + 主动作“新建执行” + 次动作“查看任务中心”
- 第一行（8+4）：快捷启动卡 + 系统健康卡
- 第二行（6+6）：最近会话 + 运行中任务
- 第三行（12）：最近产出与可复用结果

设计意图：先行动，再判断系统状态，最后回顾沉淀。

### 3.2 对话与执行 `/sessions/:sessionId`

布局（2.5 栏）：

- 左栏（280）：会话信息、计划列表、历史回合入口
- 中栏（自适应）：消息主阅读区 + 底部固定输入区
- 右栏（360）：进度 / 引用与异常 / 任务 Tab

设计意图：中栏保证阅读连续性，右栏按需展开上下文。

### 3.3 任务中心 `/tasks`

布局：

- 顶部筛选：关键词、状态、分页控制、视图切换
- 主区默认列表（服务端分页）
- 看板作为补充视图，不抢占主路径

设计意图：列表优先定位效率，看板优先态势感知。

### 3.4 任务详情 `/tasks/:taskId`

布局（主副双栏）：

- 顶部动作条：暂停 / 继续 / 取消 / 从失败节点重试
- 主区（8）：执行时间轴 + 结果与引用 + 执行记录
- 侧栏（4）：任务元信息 + 分享链接管理 + 导出

设计意图：将“控制动作”与“证据输出”并列呈现，减少跳转。

### 3.5 资产与治理页

- 工具页：表格主视图 + 状态标识 + 详情抽屉
- 知识库页：列表 + 文档明细 + 检索测试
- Workflow Draft：筛选列表 + 草案详情 + 发布动作

设计意图：治理场景以“查-改-发”为核心，不引入复杂画布交互。

## 4. 核心用户路径（必须打通）

### 4.1 新建 Agent / 新建任务

- 入口：工作台主按钮、会话列表页主按钮
- 路径：选择现有 Agent 或快速创建 Agent，再启动 Session
- 产出：创建会话并进入执行页

### 4.2 输入目标并执行

- 在会话页输入目标后触发 `POST /api/v2/sessions/{id}/turns`
- 立刻反馈受理状态（turn accepted / plan 创建中）
- 可在右侧信息区查看路由决策摘要（命中/候补/兜底）

### 4.3 执行中途控制

- 在任务详情提供暂停/继续/取消/重试
- 在会话页实时查看 TaskStarted/TaskCompleted 事件

### 4.4 结果与引用

- 执行结束后展示最终结果
- 引用来源按类型、来源、相关性展示

### 4.5 导出与分享

- 支持 Markdown/JSON 导出
- 支持分享链接创建、列表、撤销、过期控制

### 4.6 历史回溯

- 通过会话回合、任务执行记录、日志检索完成复盘
- 通过 `traceId` 串联入口请求与后端执行日志

## 5. 组件与状态规范

### 5.1 页面基线组件

- 页面容器：`page-container`
- 内容区块：`page-section`
- 页头：`PageHeader`
- 状态视图：`StateView`
- 状态标签：`StatusTag`

### 5.2 状态体系（统一文案风格）

- 空状态：说明当前为空 + 下一步动作
- 加载态：明确“正在加载什么”
- 错误态：错误摘要 + 重试按钮 + 排障建议
- 不可用态：说明不可用原因 + 恢复/降级路径（当前版本无 RBAC 门控）
- 长任务进度：阶段标签 + 百分比 + 最近事件
- 流式输出：增量渲染 + 自动滚动可切换
- 候补草案提示态：显示 Draft 提示与治理入口（查看/编辑 Draft）
- 路由决策空态：无 routing 数据时显示“命中正式 Definition 或尚未绑定”

### 5.3 交互约束

- 主按钮每页只保留 1 个。
- 危险操作（取消、批量撤销）必须二次确认。
- 抽屉用于轻编辑，复杂编辑进入独立页面。
- 表格默认支持复制关键 ID（taskId/planId/traceId）。

## 6. 视觉规范（Design Tokens）

### 6.1 字体与字号

- 字体：系统无衬线（`Inter`, `PingFang SC`, `Segoe UI`, `sans-serif`）
- 字号阶梯：`12 / 14 / 16 / 20 / 24`
- 行高建议：正文 `1.6`，标题 `1.4`

### 6.2 间距体系

- 基础间距：`4 / 8 / 12 / 16 / 24 / 32`
- 卡片内边距：默认 `16`，复杂信息卡片 `24`
- 区块间距：同级 `16`，跨组 `24`

### 6.3 圆角与阴影

- 输入框与按钮：`8`
- 卡片与抽屉：`12`
- 阴影层级：
  - L1（常态卡片）：轻阴影
  - L2（浮层）：中阴影
  - L3（模态）：重阴影

### 6.4 颜色与对比度

- 主色：冷静蓝系（用于主动作与关键状态）
- 成功：绿色；警告：橙色；错误：红色；信息：中性蓝
- 文本对比：正文与背景对比至少满足 AA（建议 4.5:1）
- 禁用态不低于可辨识阈值，避免“看不见但可点”

### 6.5 按钮层级

- Primary：当前页面唯一主任务
- Default：次要可选动作
- Link：跳转或轻量动作
- Danger：不可逆操作（必须确认）

## 7. 可实现建议（工程落地）

### 7.1 组件与样式

- 组件库：`Ant Design`（保持一致性与可维护）
- 样式策略：全局样式 + CSS 变量（token）+ 少量页面局部样式
- 统一抽象：继续复用 `PageHeader/StateView/StatusTag`

### 7.2 布局与响应式

- 桌面优先（Desktop First）
- 断点建议：
  - `>=1200`：完整三栏/双栏
  - `992~1199`：压缩侧栏，保留主任务信息
  - `768~991`：单栏堆叠，右栏转 Tab
  - `<768`：移动仅保留核心查看能力

### 7.3 数据与性能

- 列表页优先服务端分页
- 会话页增量更新通过 SSE + 查询 API 双轨
- 长列表默认虚拟滚动或分页，避免一次性渲染

## 8. 当前落地现状（事实基线）

### 8.1 已完成（含证据）

- 全局壳层与导航信息架构已统一（工作台/对话执行/任务中心/资产中心/观测日志/设置）。
- 一级页面已统一 `page-container + page-section`，状态组件统一为 `PageHeader/StateView/StatusTag`。
- 会话启动器已支持“选择 Agent / 快速创建 Agent -> 启动 Session -> 触发 Turn”。
- 会话页可展示 routing 决策摘要与 fallback 提示，任务详情具备中途控制与结果导出闭环。
- 设置域已收口：仅保留 `/settings/profile`，移除系统配置与成员权限页面。

证据索引：

- 提交：`8eb3daa`、`6f0769c`、`6e43b60`、`5a02163`
- 路由契约：`/workspace`、`/sessions`、`/tasks`、`/assets/*`、`/observability/*`、`/settings/profile`
- 校验：前端构建 `npm run build` 可通过

### 8.2 未完成 / 计划优化

- `范围外`：登录与 RBAC 不纳入当前版本。
- `P1`：会话执行页信息密度优化（减少横向切换与滚动成本）。
- `P1`：任务中心筛选条件记忆与恢复优化。
- `P2`：视觉细节与键盘可达性持续优化（不影响主链路交付节奏）。

## 9. 验收清单（UI/UX）

- 任意主路径页面首屏 3 秒内可理解“我现在能做什么”。
- 任意失败态都提供“可恢复动作”。
- 主链路关键操作在页面内可见，不依赖隐蔽入口。
- 页面风格、间距、字号、状态标签保持一致，不出现混用。
